# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=mos -run-pass=legalizer -verify-machineinstrs -o - %s | FileCheck %s
---
name: sext_1
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: sext_1
    ; CHECK: [[COPY:%[0-9]+]]:_(s1) = COPY $c
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 -1
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[SELECT:%[0-9]+]]:_(s8) = G_SELECT [[COPY]](s1), [[C]], [[C1]]
    ; CHECK: [[SELECT1:%[0-9]+]]:_(s8) = G_SELECT [[COPY]](s1), [[C]], [[C1]]
    ; CHECK: [[SELECT2:%[0-9]+]]:_(s8) = G_SELECT [[COPY]](s1), [[C]], [[C1]]
    ; CHECK: [[SELECT3:%[0-9]+]]:_(s8) = G_SELECT [[COPY]](s1), [[C]], [[C1]]
    ; CHECK: RTS implicit [[SELECT]](s8), implicit [[SELECT1]](s8), implicit [[SELECT2]](s8), implicit [[SELECT3]](s8)
    %0:_(s1) = COPY $c
    %1:_(s32) = G_SEXT %0
    %2:_(s8), %3:_(s8), %4:_(s8), %5:_(s8) = G_UNMERGE_VALUES %1
    RTS implicit %2, implicit %3, implicit %4, implicit %5
...
---
name: sext_8
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: sext_8
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 -128
    ; CHECK: [[AND:%[0-9]+]]:_(s8) = G_AND [[COPY]], [[C]]
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[C2:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[AND]], [[C1]], [[C2]]
    ; CHECK: [[COPY1:%[0-9]+]]:_(s1) = COPY [[SBC4]](s1)
    ; CHECK: [[C3:%[0-9]+]]:_(s8) = G_CONSTANT i8 -1
    ; CHECK: [[SELECT:%[0-9]+]]:_(s8) = G_SELECT [[COPY1]](s1), [[C1]], [[C3]]
    ; CHECK: RTS implicit [[COPY]](s8), implicit [[SELECT]](s8), implicit [[SELECT]](s8), implicit [[SELECT]](s8)
    %0:_(s8) = COPY $a
    %1:_(s32) = G_SEXT %0
    %2:_(s8), %3:_(s8), %4:_(s8), %5:_(s8) = G_UNMERGE_VALUES %1
    RTS implicit %2, implicit %3, implicit %4, implicit %5
...
---
name: sext_16
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: sext_16
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[C:%[0-9]+]]:_(s16) = G_CONSTANT i16 -32768
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[C]](s16)
    ; CHECK: [[AND:%[0-9]+]]:_(s8) = G_AND [[COPY]], [[UV]]
    ; CHECK: [[AND1:%[0-9]+]]:_(s8) = G_AND [[COPY1]], [[UV1]]
    ; CHECK: [[C1:%[0-9]+]]:_(s16) = G_CONSTANT i16 0
    ; CHECK: [[UV2:%[0-9]+]]:_(s8), [[UV3:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[C1]](s16)
    ; CHECK: [[C2:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[AND1]], [[UV3]], [[C2]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC4]](s1)
    ; CHECK: [[C3:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[AND]], [[UV2]], [[C2]]
    ; CHECK: [[COPY3:%[0-9]+]]:_(s1) = COPY [[SBC9]](s1)
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[COPY2]](s1), [[COPY3]], [[C3]]
    ; CHECK: [[C4:%[0-9]+]]:_(s8) = G_CONSTANT i8 -1
    ; CHECK: [[C5:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[SELECT1:%[0-9]+]]:_(s8) = G_SELECT [[SELECT]](s1), [[C5]], [[C4]]
    ; CHECK: RTS implicit [[COPY]](s8), implicit [[COPY1]](s8), implicit [[SELECT1]](s8), implicit [[SELECT1]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $a
    %2:_(s16) = G_MERGE_VALUES %0, %1
    %3:_(s32) = G_SEXT %2
    %4:_(s8), %5:_(s8), %6:_(s8), %7:_(s8) = G_UNMERGE_VALUES %3
    RTS implicit %4, implicit %5, implicit %6, implicit %7
...
---
name: sext_32_24
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: sext_32_24
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY $y
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 -128
    ; CHECK: [[C2:%[0-9]+]]:_(s8) = G_CONSTANT i8 -1
    ; CHECK: [[DEF:%[0-9]+]]:_(s8) = G_IMPLICIT_DEF
    ; CHECK: [[COPY3:%[0-9]+]]:_(s8) = COPY [[DEF]](s8)
    ; CHECK: [[AND:%[0-9]+]]:_(s8) = G_AND [[COPY]], [[C]]
    ; CHECK: [[AND1:%[0-9]+]]:_(s8) = G_AND [[COPY1]], [[C]]
    ; CHECK: [[AND2:%[0-9]+]]:_(s8) = G_AND [[COPY2]], [[C1]]
    ; CHECK: [[AND3:%[0-9]+]]:_(s8) = G_AND [[COPY3]], [[DEF]]
    ; CHECK: [[C3:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[AND2]], [[C]], [[C3]]
    ; CHECK: [[COPY4:%[0-9]+]]:_(s1) = COPY [[SBC4]](s1)
    ; CHECK: [[C4:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[AND1]], [[C]], [[C3]]
    ; CHECK: [[COPY5:%[0-9]+]]:_(s1) = COPY [[SBC9]](s1)
    ; CHECK: [[SBC10:%[0-9]+]]:_(s8), [[SBC11:%[0-9]+]]:_(s1), [[SBC12:%[0-9]+]]:_, [[SBC13:%[0-9]+]]:_, [[SBC14:%[0-9]+]]:_ = G_SBC [[AND]], [[C]], [[C3]]
    ; CHECK: [[COPY6:%[0-9]+]]:_(s1) = COPY [[SBC14]](s1)
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[COPY5]](s1), [[COPY6]], [[C4]]
    ; CHECK: [[SELECT1:%[0-9]+]]:_(s1) = G_SELECT [[COPY4]](s1), [[SELECT]], [[C4]]
    ; CHECK: [[SELECT2:%[0-9]+]]:_(s8) = G_SELECT [[SELECT1]](s1), [[C]], [[C2]]
    ; CHECK: RTS implicit [[COPY]](s8), implicit [[COPY1]](s8), implicit [[COPY2]](s8), implicit [[SELECT2]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s8) = COPY $y
    %3:_(s24) = G_MERGE_VALUES %0, %1, %2
    %4:_(s32) = G_SEXT %3
    %5:_(s8), %6:_(s8), %7:_(s8), %8:_(s8) = G_UNMERGE_VALUES %4
    RTS implicit %5, implicit %6, implicit %7, implicit %8
...
---
name: zext_1
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: zext_1
    ; CHECK: [[COPY:%[0-9]+]]:_(s1) = COPY $c
    ; CHECK: [[C:%[0-9]+]]:_(s16) = G_CONSTANT i16 1
    ; CHECK: [[C1:%[0-9]+]]:_(s16) = G_CONSTANT i16 0
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[C]](s16)
    ; CHECK: [[UV2:%[0-9]+]]:_(s8), [[UV3:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[C1]](s16)
    ; CHECK: [[SELECT:%[0-9]+]]:_(s8) = G_SELECT [[COPY]](s1), [[UV]], [[UV2]]
    ; CHECK: [[SELECT1:%[0-9]+]]:_(s8) = G_SELECT [[COPY]](s1), [[UV1]], [[UV3]]
    ; CHECK: RTS implicit [[SELECT]](s8), implicit [[SELECT1]](s8)
    %0:_(s1) = COPY $c
    %1:_(s16) = G_ZEXT %0
    %2:_(s8), %3:_(s8) = G_UNMERGE_VALUES %1
    RTS implicit %2, implicit %3
...
---
name: zext_8
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: zext_8
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: RTS implicit [[COPY]](s8), implicit [[C]](s8)
    %0:_(s8) = COPY $a
    %1:_(s16) = G_ZEXT %0
    %2:_(s8), %3:_(s8) = G_UNMERGE_VALUES %1
    RTS implicit %2, implicit %3
...
---
name: zext_16
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: zext_16
    ; CHECK: [[COPY:%[0-9]+]]:_(s16) = COPY $rs1
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY]](s16)
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: RTS implicit [[UV]](s8), implicit [[UV1]](s8), implicit [[C]](s8), implicit [[C]](s8)
    %0:_(s16) = COPY $rs1
    %1:_(s32) = G_ZEXT %0
    %2:_(s8), %3:_(s8), %4:_(s8), %5:_(s8) = G_UNMERGE_VALUES %1
    RTS implicit %2, implicit %3, implicit %4, implicit %5
...
---
name: trunc_anyext
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: trunc_anyext
    ; CHECK: [[COPY:%[0-9]+]]:_(s1) = COPY $c
    ; CHECK: [[COPY1:%[0-9]+]]:_(s1) = COPY [[COPY]](s1)
    ; CHECK: RTS implicit [[COPY1]](s1)
    %1:_(s1) = COPY $c
    %2:_(s8) = G_ANYEXT %1
    %3:_(s1) = G_TRUNC %2
    RTS implicit %3
...
---
name: unmerge_anyext_to_copy
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: unmerge_anyext_to_copy
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY [[COPY]](s8)
    ; CHECK: [[DEF:%[0-9]+]]:_(s8) = G_IMPLICIT_DEF
    ; CHECK: RTS implicit [[COPY1]](s8), implicit [[DEF]](s8)
    %1:_(s8) = COPY $a
    %2:_(s16) = G_ANYEXT %1
    %3:_(s8), %4:_(s8) = G_UNMERGE_VALUES %2
    RTS implicit %3, implicit %4
...
---
name: unmerge_anyext_to_unmerge
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: unmerge_anyext_to_unmerge
    ; CHECK: [[COPY:%[0-9]+]]:_(s16) = COPY $rs1
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY]](s16)
    ; CHECK: [[DEF:%[0-9]+]]:_(s8) = G_IMPLICIT_DEF
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY [[DEF]](s8)
    ; CHECK: RTS implicit [[UV]](s8), implicit [[UV1]](s8), implicit [[DEF]](s8), implicit [[COPY1]](s8)
    %1:_(s16) = COPY $rs1
    %2:_(s32) = G_ANYEXT %1
    %3:_(s8), %4:_(s8), %5:_(s8), %6:_(s8) = G_UNMERGE_VALUES %2
    RTS implicit %3, implicit %4, implicit %5, implicit %6
...
---
name: bswap_16
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: bswap_16
    ; CHECK: [[COPY:%[0-9]+]]:_(s16) = COPY $rs1
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY]](s16)
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY [[UV1]](s8)
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY [[UV]](s8)
    ; CHECK: [[MV:%[0-9]+]]:_(s16) = G_MERGE_VALUES [[COPY1]](s8), [[COPY2]](s8)
    ; CHECK: RTS implicit [[MV]](s16)
    %0:_(s16) = COPY $rs1
    %1:_(s16) = G_BSWAP %0
    RTS implicit %1
...
---
name: bswap_17
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: bswap_17
    ; CHECK: [[COPY:%[0-9]+]]:_(s16) = COPY $rs1
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY]](s16)
    ; CHECK: [[DEF:%[0-9]+]]:_(s8) = G_IMPLICIT_DEF
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY [[DEF]](s8)
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY [[COPY1]](s8)
    ; CHECK: [[COPY3:%[0-9]+]]:_(s8) = COPY [[DEF]](s8)
    ; CHECK: [[COPY4:%[0-9]+]]:_(s8) = COPY [[UV1]](s8)
    ; CHECK: [[COPY5:%[0-9]+]]:_(s8) = COPY [[UV]](s8)
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 15
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: ADJCALLSTACKDOWN 0, 0, implicit-def $rs0, implicit $rs0
    ; CHECK: $a = COPY [[COPY2]](s8)
    ; CHECK: $x = COPY [[COPY3]](s8)
    ; CHECK: $rc2 = COPY [[COPY4]](s8)
    ; CHECK: $rc3 = COPY [[COPY5]](s8)
    ; CHECK: $rc4 = COPY [[C]](s8)
    ; CHECK: JSR &__lshrsi3, mos_csr, implicit $a, implicit $x, implicit $rc2, implicit $rc3, implicit $rc4, implicit-def $a, implicit-def $x, implicit-def $rc2, implicit-def $rc3
    ; CHECK: [[COPY6:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY7:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[COPY8:%[0-9]+]]:_(s8) = COPY $rc2
    ; CHECK: [[COPY9:%[0-9]+]]:_(s8) = COPY $rc3
    ; CHECK: ADJCALLSTACKUP 0, 0, implicit-def $rs0, implicit $rs0
    ; CHECK: [[MV:%[0-9]+]]:_(s16) = G_MERGE_VALUES [[COPY6]](s8), [[COPY7]](s8)
    ; CHECK: RTS implicit [[MV]](s16)
    %0:_(s16) = COPY $rs1
    %1:_(s17) = G_ANYEXT %0
    %2:_(s17) = G_BSWAP %1
    %3:_(s16) = G_TRUNC %2
    RTS implicit %3
...
---
name: usubsat
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: usubsat
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 16
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 32
    ; CHECK: [[C2:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[C3:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[C]], [[C1]], [[C3]]
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY [[SBC]](s8)
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[SBC1]](s1), [[C2]], [[C3]]
    ; CHECK: [[C4:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[SELECT1:%[0-9]+]]:_(s8) = G_SELECT [[SELECT]](s1), [[C4]], [[COPY]]
    ; CHECK: RTS implicit [[SELECT1]](s8)
    %0:_(s8) = G_CONSTANT i8 16
    %1:_(s8) = G_CONSTANT i8 32
    %2:_(s8) = G_USUBSAT %0, %1
    RTS implicit %2
...
---
name: shl_1_8bit
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: shl_1_8bit
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SHLE:%[0-9]+]]:_(s8), [[SHLE1:%[0-9]+]]:_(s1) = G_SHLE [[COPY]], [[C]]
    ; CHECK: RTS implicit [[SHLE]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = G_CONSTANT i8 1
    %2:_(s8) = G_SHL %0, %1
    RTS implicit %2
...
---
name: shl_1
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: shl_1
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY $y
    ; CHECK: [[COPY3:%[0-9]+]]:_(s8) = COPY $rc0
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 1
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[C2:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SHLE:%[0-9]+]]:_(s8), [[SHLE1:%[0-9]+]]:_(s1) = G_SHLE [[COPY]], [[C2]]
    ; CHECK: [[SHLE2:%[0-9]+]]:_(s8), [[SHLE3:%[0-9]+]]:_(s1) = G_SHLE [[COPY1]], [[SHLE1]]
    ; CHECK: [[SHLE4:%[0-9]+]]:_(s8), [[SHLE5:%[0-9]+]]:_(s1) = G_SHLE [[COPY2]], [[SHLE3]]
    ; CHECK: [[SHLE6:%[0-9]+]]:_(s8), [[SHLE7:%[0-9]+]]:_(s1) = G_SHLE [[COPY3]], [[SHLE5]]
    ; CHECK: RTS implicit [[SHLE]](s8), implicit [[SHLE2]](s8), implicit [[SHLE4]](s8), implicit [[SHLE6]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s8) = COPY $y
    %3:_(s8) = COPY $rc0
    %4:_(s32) = G_MERGE_VALUES %0, %1, %2, %3
    %5:_(s32) = G_CONSTANT i32 1
    %6:_(s32) = G_SHL %4, %5
    %7:_(s8), %8:_(s8), %9:_(s8), %10:_(s8) = G_UNMERGE_VALUES %6
    RTS implicit %7, implicit %8, implicit %9, implicit %10
...
---
name: shl_16
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: shl_16
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY $y
    ; CHECK: [[COPY3:%[0-9]+]]:_(s8) = COPY $rc0
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 16
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[C2:%[0-9]+]]:_(s16) = G_CONSTANT i16 0
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[C2]](s16)
    ; CHECK: RTS implicit [[UV]](s8), implicit [[UV1]](s8), implicit [[COPY]](s8), implicit [[COPY1]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s8) = COPY $y
    %3:_(s8) = COPY $rc0
    %4:_(s32) = G_MERGE_VALUES %0, %1, %2, %3
    %5:_(s32) = G_CONSTANT i32 16
    %6:_(s32) = G_SHL %4, %5
    %7:_(s8), %8:_(s8), %9:_(s8), %10:_(s8) = G_UNMERGE_VALUES %6
    RTS implicit %7, implicit %8, implicit %9, implicit %10
...
---
name: shl_var
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: shl_var
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: ADJCALLSTACKDOWN 0, 0, implicit-def $rs0, implicit $rs0
    ; CHECK: $a = COPY [[COPY]](s8)
    ; CHECK: $x = COPY [[COPY1]](s8)
    ; CHECK: JSR &__ashlqi3, mos_csr, implicit $a, implicit $x, implicit-def $a
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: ADJCALLSTACKUP 0, 0, implicit-def $rs0, implicit $rs0
    ; CHECK: RTS implicit [[COPY2]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s8) = G_SHL %0, %1
    RTS implicit %2
...
---
name: lshr_1
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: lshr_1
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 1
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[C2:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[LSHRE:%[0-9]+]]:_(s8), [[LSHRE1:%[0-9]+]]:_(s1) = G_LSHRE [[COPY1]], [[C2]]
    ; CHECK: [[LSHRE2:%[0-9]+]]:_(s8), [[LSHRE3:%[0-9]+]]:_(s1) = G_LSHRE [[COPY]], [[LSHRE1]]
    ; CHECK: RTS implicit [[LSHRE2]](s8), implicit [[LSHRE]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s16) = G_MERGE_VALUES %0, %1
    %3:_(s32) = G_CONSTANT i32 1
    %4:_(s16) = G_LSHR %2, %3
    %5:_(s8), %6:_(s8) = G_UNMERGE_VALUES %4
    RTS implicit %5, implicit %6
...
---
name: lshr_8_s8
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: lshr_8_s8
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 8
    ; CHECK: ADJCALLSTACKDOWN 0, 0, implicit-def $rs0, implicit $rs0
    ; CHECK: $a = COPY [[C]](s8)
    ; CHECK: $x = COPY [[C]](s8)
    ; CHECK: JSR &__lshrqi3, mos_csr, implicit $a, implicit $x, implicit-def $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: ADJCALLSTACKUP 0, 0, implicit-def $rs0, implicit $rs0
    ; CHECK: RTS implicit [[COPY1]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = G_CONSTANT i8 8
    %2:_(s8) = G_LSHR %1, %1
    RTS implicit %2
...
---
name: lshr_var
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: lshr_var
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: ADJCALLSTACKDOWN 0, 0, implicit-def $rs0, implicit $rs0
    ; CHECK: $a = COPY [[COPY]](s8)
    ; CHECK: $x = COPY [[COPY1]](s8)
    ; CHECK: JSR &__lshrqi3, mos_csr, implicit $a, implicit $x, implicit-def $a
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: ADJCALLSTACKUP 0, 0, implicit-def $rs0, implicit $rs0
    ; CHECK: RTS implicit [[COPY2]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s8) = G_LSHR %0, %1
    RTS implicit %2
...
---
name: ashr_7
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ashr_7
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 7
    ; CHECK: ADJCALLSTACKDOWN 0, 0, implicit-def $rs0, implicit $rs0
    ; CHECK: $a = COPY [[COPY]](s8)
    ; CHECK: $x = COPY [[C]](s8)
    ; CHECK: JSR &__ashrqi3, mos_csr, implicit $a, implicit $x, implicit-def $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: ADJCALLSTACKUP 0, 0, implicit-def $rs0, implicit $rs0
    ; CHECK: RTS implicit [[COPY1]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = G_CONSTANT i8 7
    %2:_(s8) = G_ASHR %0, %1
    RTS implicit %2
# Note: submsb == 5
...
---
name: rotl_7
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: rotl_7
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[DEF:%[0-9]+]]:_(s1) = G_IMPLICIT_DEF
    ; CHECK: [[LSHRE:%[0-9]+]]:_(s8), [[LSHRE1:%[0-9]+]]:_(s1) = G_LSHRE [[COPY]], [[DEF]]
    ; CHECK: [[LSHRE2:%[0-9]+]]:_(s8), [[LSHRE3:%[0-9]+]]:_(s1) = G_LSHRE [[COPY]], [[LSHRE1]]
    ; CHECK: RTS implicit [[LSHRE2]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = G_CONSTANT i8 7
    %2:_(s8) = G_ROTL %0, %1
    RTS implicit %2
...
---
name: rotr_1
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: rotr_1
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[DEF:%[0-9]+]]:_(s1) = G_IMPLICIT_DEF
    ; CHECK: [[LSHRE:%[0-9]+]]:_(s8), [[LSHRE1:%[0-9]+]]:_(s1) = G_LSHRE [[COPY]], [[DEF]]
    ; CHECK: [[LSHRE2:%[0-9]+]]:_(s8), [[LSHRE3:%[0-9]+]]:_(s1) = G_LSHRE [[COPY]], [[LSHRE1]]
    ; CHECK: RTS implicit [[LSHRE2]](s8)
    %0:_(s8) = COPY $a
    %1:_(s8) = G_CONSTANT i8 1
    %2:_(s8) = G_ROTR %0, %1
    RTS implicit %2
...
---
name: icmp_ptr
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_ptr
    ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $rs1
    ; CHECK: [[COPY1:%[0-9]+]]:_(p0) = COPY $rs3
    ; CHECK: [[PTRTOINT:%[0-9]+]]:_(s16) = G_PTRTOINT [[COPY]](p0)
    ; CHECK: [[PTRTOINT1:%[0-9]+]]:_(s16) = G_PTRTOINT [[COPY1]](p0)
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[PTRTOINT]](s16)
    ; CHECK: [[UV2:%[0-9]+]]:_(s8), [[UV3:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[PTRTOINT1]](s16)
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[UV1]], [[UV3]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC4]](s1)
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[UV]], [[UV2]], [[C]]
    ; CHECK: [[COPY3:%[0-9]+]]:_(s1) = COPY [[SBC9]](s1)
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[COPY2]](s1), [[COPY3]], [[C1]]
    ; CHECK: RTS implicit [[SELECT]](s1)
    %0:_(p0) = COPY $rs1
    %1:_(p0) = COPY $rs3
    %2:_(s1) = G_ICMP intpred(eq), %0, %1
    RTS implicit %2
...
---
name: icmp_s3
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_s3
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 7
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY [[COPY]](s8)
    ; CHECK: [[AND:%[0-9]+]]:_(s8) = G_AND [[COPY1]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY [[COPY]](s8)
    ; CHECK: [[AND1:%[0-9]+]]:_(s8) = G_AND [[COPY2]], [[C]]
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[AND]], [[AND1]], [[C1]]
    ; CHECK: [[COPY3:%[0-9]+]]:_(s1) = COPY [[SBC4]](s1)
    ; CHECK: RTS implicit [[COPY3]](s1)
    %0:_(s8) = COPY $a
    %1:_(s3) = G_TRUNC %0
    %2:_(s3) = G_TRUNC %0
    %3:_(s1) = G_ICMP intpred(eq), %1, %2
    RTS implicit %3
...
---
name: icmp_eq_s16
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_eq_s16
    ; CHECK: [[COPY:%[0-9]+]]:_(s16) = COPY $rs1
    ; CHECK: [[COPY1:%[0-9]+]]:_(s16) = COPY $rs2
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY]](s16)
    ; CHECK: [[UV2:%[0-9]+]]:_(s8), [[UV3:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY1]](s16)
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[UV1]], [[UV3]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC4]](s1)
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[UV]], [[UV2]], [[C]]
    ; CHECK: [[COPY3:%[0-9]+]]:_(s1) = COPY [[SBC9]](s1)
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[COPY2]](s1), [[COPY3]], [[C1]]
    ; CHECK: RTS implicit [[SELECT]](s1)
    %0:_(s16) = COPY $rs1
    %1:_(s16) = COPY $rs2
    %2:_(s1) = G_ICMP intpred(eq), %0, %1
    RTS implicit %2
...
---
name: icmp_ule_s16
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_ule_s16
    ; CHECK: [[COPY:%[0-9]+]]:_(s16) = COPY $rs1
    ; CHECK: [[COPY1:%[0-9]+]]:_(s16) = COPY $rs2
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY1]](s16)
    ; CHECK: [[UV2:%[0-9]+]]:_(s8), [[UV3:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY]](s16)
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[UV1]], [[UV3]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC4]](s1)
    ; CHECK: [[COPY3:%[0-9]+]]:_(s1) = COPY [[SBC1]](s1)
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[UV]], [[UV2]], [[C]]
    ; CHECK: [[COPY4:%[0-9]+]]:_(s1) = COPY [[SBC6]](s1)
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[COPY2]](s1), [[COPY4]], [[COPY3]]
    ; CHECK: RTS implicit [[SELECT]](s1)
    %0:_(s16) = COPY $rs1
    %1:_(s16) = COPY $rs2
    %2:_(s1) = G_ICMP intpred(ule), %0, %1
    RTS implicit %2
...
---
name: icmp_slt_s16
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_slt_s16
    ; CHECK: [[COPY:%[0-9]+]]:_(s16) = COPY $rs1
    ; CHECK: [[COPY1:%[0-9]+]]:_(s16) = COPY $rs2
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY]](s16)
    ; CHECK: [[UV2:%[0-9]+]]:_(s8), [[UV3:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY1]](s16)
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[UV]], [[UV2]], [[C]]
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[UV1]], [[UV3]], [[SBC1]]
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 -128
    ; CHECK: [[XOR:%[0-9]+]]:_(s8) = G_XOR [[SBC5]], [[C1]]
    ; CHECK: [[C2:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[SELECT:%[0-9]+]]:_(s8) = G_SELECT [[SBC8]](s1), [[XOR]], [[SBC5]]
    ; CHECK: [[SBC10:%[0-9]+]]:_(s8), [[SBC11:%[0-9]+]]:_(s1), [[SBC12:%[0-9]+]]:_, [[SBC13:%[0-9]+]]:_, [[SBC14:%[0-9]+]]:_ = G_SBC [[SELECT]], [[C2]], [[C]]
    ; CHECK: RTS implicit [[SBC12]](s1)
    %0:_(s16) = COPY $rs1
    %1:_(s16) = COPY $rs2
    %2:_(s1) = G_ICMP intpred(slt), %0, %1
    RTS implicit %2
...
---
name: icmp_eq
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_eq
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC4]](s1)
    ; CHECK: RTS implicit [[COPY2]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(eq), %0, %1
    RTS implicit %2
...
---
name: icmp_ne
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_ne
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC4]](s1)
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[COPY2]](s1), [[C1]], [[C]]
    ; CHECK: RTS implicit [[SELECT]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(ne), %0, %1
    RTS implicit %2
...
---
name: icmp_ugt
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_ugt
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY1]], [[COPY]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC1]](s1)
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[COPY2]](s1), [[C1]], [[C]]
    ; CHECK: RTS implicit [[SELECT]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(ugt), %0, %1
    RTS implicit %2
...
---
name: icmp_uge
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_uge
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC1]](s1)
    ; CHECK: RTS implicit [[COPY2]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(uge), %0, %1
    RTS implicit %2
...
---
name: icmp_ult
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_ult
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC1]](s1)
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[COPY2]](s1), [[C1]], [[C]]
    ; CHECK: RTS implicit [[SELECT]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(ult), %0, %1
    RTS implicit %2
...
---
name: icmp_ule
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_ule
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY1]], [[COPY]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC1]](s1)
    ; CHECK: RTS implicit [[COPY2]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(ule), %0, %1
    RTS implicit %2
...
---
name: icmp_sgt
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_sgt
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY1]], [[COPY]], [[C]]
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 -128
    ; CHECK: [[XOR:%[0-9]+]]:_(s8) = G_XOR [[SBC]], [[C1]]
    ; CHECK: [[C2:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[SELECT:%[0-9]+]]:_(s8) = G_SELECT [[SBC3]](s1), [[XOR]], [[SBC]]
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[SELECT]], [[C2]], [[C]]
    ; CHECK: RTS implicit [[SBC7]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(sgt), %0, %1
    RTS implicit %2
...
---
name: icmp_sge
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_sge
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[C]]
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 -128
    ; CHECK: [[XOR:%[0-9]+]]:_(s8) = G_XOR [[SBC]], [[C1]]
    ; CHECK: [[C2:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[SELECT:%[0-9]+]]:_(s8) = G_SELECT [[SBC3]](s1), [[XOR]], [[SBC]]
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[SELECT]], [[C2]], [[C]]
    ; CHECK: [[C3:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SELECT1:%[0-9]+]]:_(s1) = G_SELECT [[SBC7]](s1), [[C3]], [[C]]
    ; CHECK: RTS implicit [[SELECT1]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(sge), %0, %1
    RTS implicit %2
...
---
name: icmp_slt
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_slt
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[C]]
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 -128
    ; CHECK: [[XOR:%[0-9]+]]:_(s8) = G_XOR [[SBC]], [[C1]]
    ; CHECK: [[C2:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[SELECT:%[0-9]+]]:_(s8) = G_SELECT [[SBC3]](s1), [[XOR]], [[SBC]]
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[SELECT]], [[C2]], [[C]]
    ; CHECK: RTS implicit [[SBC7]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(slt), %0, %1
    RTS implicit %2
...
---
name: icmp_slt_0
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_slt_0
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[C]], [[C1]]
    ; CHECK: [[COPY1:%[0-9]+]]:_(s1) = COPY [[SBC2]](s1)
    ; CHECK: RTS implicit [[COPY1]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = G_CONSTANT i8 0
    %2:_(s1) = G_ICMP intpred(slt), %0, %1
    RTS implicit %2
...
---
name: icmp_sle
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: icmp_sle
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY1]], [[COPY]], [[C]]
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 -128
    ; CHECK: [[XOR:%[0-9]+]]:_(s8) = G_XOR [[SBC]], [[C1]]
    ; CHECK: [[C2:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[SELECT:%[0-9]+]]:_(s8) = G_SELECT [[SBC3]](s1), [[XOR]], [[SBC]]
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[SELECT]], [[C2]], [[C]]
    ; CHECK: [[C3:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SELECT1:%[0-9]+]]:_(s1) = G_SELECT [[SBC7]](s1), [[C3]], [[C]]
    ; CHECK: RTS implicit [[SELECT1]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(sle), %0, %1
    RTS implicit %2
...
---
name: select_p
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: select_p
    ; CHECK: [[COPY:%[0-9]+]]:_(s1) = COPY $alsb
    ; CHECK: [[COPY1:%[0-9]+]]:_(p0) = COPY $rs0
    ; CHECK: [[COPY2:%[0-9]+]]:_(p0) = COPY $rs1
    ; CHECK: [[PTRTOINT:%[0-9]+]]:_(s16) = G_PTRTOINT [[COPY1]](p0)
    ; CHECK: [[PTRTOINT1:%[0-9]+]]:_(s16) = G_PTRTOINT [[COPY2]](p0)
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[PTRTOINT]](s16)
    ; CHECK: [[UV2:%[0-9]+]]:_(s8), [[UV3:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[PTRTOINT1]](s16)
    ; CHECK: [[SELECT:%[0-9]+]]:_(s8) = G_SELECT [[COPY]](s1), [[UV]], [[UV2]]
    ; CHECK: [[SELECT1:%[0-9]+]]:_(s8) = G_SELECT [[COPY]](s1), [[UV1]], [[UV3]]
    ; CHECK: [[MV:%[0-9]+]]:_(s16) = G_MERGE_VALUES [[SELECT]](s8), [[SELECT1]](s8)
    ; CHECK: [[INTTOPTR:%[0-9]+]]:_(p0) = G_INTTOPTR [[MV]](s16)
    ; CHECK: RTS implicit [[INTTOPTR]](p0)
    %0:_(s1) = COPY $alsb
    %1:_(p0) = COPY $rs0
    %2:_(p0) = COPY $rs1
    %3:_(p0) = G_SELECT %0, %1, %2
    RTS implicit %3
...
---
name: ptradd
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ptradd
    ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $rs0
    ; CHECK: [[COPY1:%[0-9]+]]:_(s16) = COPY $rs1
    ; CHECK: [[PTRTOINT:%[0-9]+]]:_(s16) = G_PTRTOINT [[COPY]](p0)
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[PTRTOINT]](s16)
    ; CHECK: [[UV2:%[0-9]+]]:_(s8), [[UV3:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY1]](s16)
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[UADDE:%[0-9]+]]:_(s8), [[UADDE1:%[0-9]+]]:_(s1) = G_UADDE [[UV]], [[UV2]], [[C]]
    ; CHECK: [[UADDE2:%[0-9]+]]:_(s8), [[UADDE3:%[0-9]+]]:_(s1) = G_UADDE [[UV1]], [[UV3]], [[UADDE1]]
    ; CHECK: [[MV:%[0-9]+]]:_(s16) = G_MERGE_VALUES [[UADDE]](s8), [[UADDE2]](s8)
    ; CHECK: [[INTTOPTR:%[0-9]+]]:_(p0) = G_INTTOPTR [[MV]](s16)
    ; CHECK: RTS implicit [[INTTOPTR]](p0)
    %0:_(p0) = COPY $rs0
    %1:_(s16) = COPY $rs1
    %2:_(p0) = G_PTR_ADD %0, %1
    RTS implicit %2
...
---
name: ptradd_zext_8
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ptradd_zext_8
    ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $rs0
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[INDEX:%[0-9]+]]:_(p0) = G_INDEX [[COPY]], [[COPY1]](s8)
    ; CHECK: RTS implicit [[INDEX]](p0)
    %0:_(p0) = COPY $rs0
    %1:_(s8) = COPY $a
    %2:_(s16) = G_ZEXT %1
    %3:_(p0) = G_PTR_ADD %0, %2
    RTS implicit %3
...
---
name: ptradd_zext_1
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ptradd_zext_1
    ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $rs0
    ; CHECK: [[COPY1:%[0-9]+]]:_(s1) = COPY $c
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 1
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 0
    ; CHECK: [[SELECT:%[0-9]+]]:_(s8) = G_SELECT [[COPY1]](s1), [[C]], [[C1]]
    ; CHECK: [[INDEX:%[0-9]+]]:_(p0) = G_INDEX [[COPY]], [[SELECT]](s8)
    ; CHECK: RTS implicit [[INDEX]](p0)
    %0:_(p0) = COPY $rs0
    %1:_(s1) = COPY $c
    %2:_(s16) = G_ZEXT %1
    %3:_(p0) = G_PTR_ADD %0, %2
    RTS implicit %3
...
---
name: ptradd_const8
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ptradd_const8
    ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $rs0
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 -1
    ; CHECK: [[INDEX:%[0-9]+]]:_(p0) = G_INDEX [[COPY]], [[C]](s8)
    ; CHECK: RTS implicit [[INDEX]](p0)
    %0:_(p0) = COPY $rs0
    %2:_(s16) = G_CONSTANT i16 255
    %3:_(p0) = G_PTR_ADD %0, %2
    RTS implicit %3
# Note: The -1 here is really an unsigned 255.
...
---
name: uaddo
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: uaddo
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[UADDE:%[0-9]+]]:_(s8), [[UADDE1:%[0-9]+]]:_(s1) = G_UADDE [[COPY]], [[COPY1]], [[C]]
    ; CHECK: RTS implicit [[UADDE]](s8), implicit [[UADDE1]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s8), %3:_(s1) = G_UADDO %0, %1
    RTS implicit %2, implicit %3
...
---
name: saddo
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: saddo
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SADDE:%[0-9]+]]:_(s8), [[SADDE1:%[0-9]+]]:_(s1) = G_SADDE [[COPY]], [[COPY1]], [[C]]
    ; CHECK: RTS implicit [[SADDE]](s8), implicit [[SADDE1]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s8), %3:_(s1) = G_SADDO %0, %1
    RTS implicit %2, implicit %3
...
---
name: usubo
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: usubo
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[C1]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY [[SBC]](s8)
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[SBC1]](s1), [[C]], [[C1]]
    ; CHECK: RTS implicit [[COPY2]](s8), implicit [[SELECT]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s8), %3:_(s1) = G_USUBO %0, %1
    RTS implicit %2, implicit %3
...
---
name: ssubo
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ssubo
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY [[SBC]](s8)
    ; CHECK: [[COPY3:%[0-9]+]]:_(s1) = COPY [[SBC3]](s1)
    ; CHECK: RTS implicit [[COPY2]](s8), implicit [[COPY3]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s8), %3:_(s1) = G_SSUBO %0, %1
    RTS implicit %2, implicit %3
...
---
name: usube
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: usube
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY $v
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[COPY2]](s1), [[C1]], [[C]]
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[SELECT]]
    ; CHECK: [[COPY3:%[0-9]+]]:_(s8) = COPY [[SBC]](s8)
    ; CHECK: [[SELECT1:%[0-9]+]]:_(s1) = G_SELECT [[SBC1]](s1), [[C1]], [[C]]
    ; CHECK: RTS implicit [[COPY3]](s8), implicit [[SELECT1]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = COPY $v
    %3:_(s8), %4:_(s1) = G_USUBE %0, %1, %2
    RTS implicit %3, implicit %4
...
---
name: ssube
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ssube
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY $v
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[SELECT:%[0-9]+]]:_(s1) = G_SELECT [[COPY2]](s1), [[C1]], [[C]]
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[SELECT]]
    ; CHECK: [[COPY3:%[0-9]+]]:_(s8) = COPY [[SBC]](s8)
    ; CHECK: [[COPY4:%[0-9]+]]:_(s1) = COPY [[SBC3]](s1)
    ; CHECK: RTS implicit [[COPY3]](s8), implicit [[COPY4]](s1)
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = COPY $v
    %3:_(s8), %4:_(s1) = G_SSUBE %0, %1, %2
    RTS implicit %3, implicit %4
...
---
name: load_ptr
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: load_ptr
    ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $rs0
    ; CHECK: [[LOAD:%[0-9]+]]:_(s8) = G_LOAD [[COPY]](p0) :: (load 1, align 2)
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 1
    ; CHECK: [[INDEX:%[0-9]+]]:_(p0) = G_INDEX [[COPY]], [[C]](s8)
    ; CHECK: [[LOAD1:%[0-9]+]]:_(s8) = G_LOAD [[INDEX]](p0) :: (load 1 from unknown-address + 1)
    ; CHECK: [[MV:%[0-9]+]]:_(s16) = G_MERGE_VALUES [[LOAD]](s8), [[LOAD1]](s8)
    ; CHECK: [[INTTOPTR:%[0-9]+]]:_(p0) = G_INTTOPTR [[MV]](s16)
    ; CHECK: RTS implicit [[INTTOPTR]](p0)
    %0:_(p0) = COPY $rs0
    %1:_(p0) = G_LOAD %0 :: (load 2)
    RTS implicit %1
...
---
name: store_ptr
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: store_ptr
    ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $rs0
    ; CHECK: [[COPY1:%[0-9]+]]:_(p0) = COPY $rs1
    ; CHECK: [[PTRTOINT:%[0-9]+]]:_(s16) = G_PTRTOINT [[COPY1]](p0)
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[PTRTOINT]](s16)
    ; CHECK: G_STORE [[UV]](s8), [[COPY]](p0) :: (store 1, align 2)
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 1
    ; CHECK: [[INDEX:%[0-9]+]]:_(p0) = G_INDEX [[COPY]], [[C]](s8)
    ; CHECK: G_STORE [[UV1]](s8), [[INDEX]](p0) :: (store 1 into unknown-address + 1)
    ; CHECK: RTS
    %0:_(p0) = COPY $rs0
    %1:_(p0) = COPY $rs1
    G_STORE %1, %0 :: (store 2)
    RTS
...
---
name: brcond
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: brcond
    ; CHECK: successors: %bb.0(0x80000000)
    ; CHECK: [[COPY:%[0-9]+]]:_(s1) = COPY $c
    ; CHECK: G_BRCOND_IMM [[COPY]](s1), %bb.0, 1
    %0:_(s1) = COPY $c
    G_BRCOND %0, %bb.0
...
---
name: brcond_not
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: brcond_not
    ; CHECK: successors: %bb.0(0x80000000)
    ; CHECK: [[COPY:%[0-9]+]]:_(s1) = COPY $c
    ; CHECK: G_BRCOND_IMM [[COPY]](s1), %bb.0, 0
    %0:_(s1) = COPY $c
    %1:_(s1) = G_CONSTANT i1 true
    %2:_(s1) = G_XOR %0, %1
    G_BRCOND %2, %bb.0
...
---
name: brcond_icmp_ne
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: brcond_icmp_ne
    ; CHECK: successors: %bb.0(0x80000000)
    ; CHECK: [[COPY:%[0-9]+]]:_(s8) = COPY $a
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY $x
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[COPY]], [[COPY1]], [[C]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC4]](s1)
    ; CHECK: G_BRCOND_IMM [[COPY2]](s1), %bb.0, 0
    %0:_(s8) = COPY $a
    %1:_(s8) = COPY $x
    %2:_(s1) = G_ICMP intpred(ne), %0, %1
    G_BRCOND %2, %bb.0
...
---
name: vaarg
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: vaarg
    ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $rs1
    ; CHECK: [[LOAD:%[0-9]+]]:_(s8) = G_LOAD [[COPY]](p0) :: (invariant load 1)
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 1
    ; CHECK: [[INDEX:%[0-9]+]]:_(p0) = G_INDEX [[COPY]], [[C]](s8)
    ; CHECK: [[LOAD1:%[0-9]+]]:_(s8) = G_LOAD [[INDEX]](p0) :: (invariant load 1 from unknown-address + 1)
    ; CHECK: [[MV:%[0-9]+]]:_(s16) = G_MERGE_VALUES [[LOAD]](s8), [[LOAD1]](s8)
    ; CHECK: [[INTTOPTR:%[0-9]+]]:_(p0) = G_INTTOPTR [[MV]](s16)
    ; CHECK: [[LOAD2:%[0-9]+]]:_(s8) = G_LOAD [[INTTOPTR]](p0) :: (invariant load 1)
    ; CHECK: [[INDEX1:%[0-9]+]]:_(p0) = G_INDEX [[INTTOPTR]], [[C]](s8)
    ; CHECK: [[LOAD3:%[0-9]+]]:_(s8) = G_LOAD [[INDEX1]](p0) :: (invariant load 1 from unknown-address + 1)
    ; CHECK: [[MV1:%[0-9]+]]:_(s16) = G_MERGE_VALUES [[LOAD2]](s8), [[LOAD3]](s8)
    ; CHECK: [[INTTOPTR1:%[0-9]+]]:_(p0) = G_INTTOPTR [[MV1]](s16)
    ; CHECK: [[C1:%[0-9]+]]:_(s8) = G_CONSTANT i8 2
    ; CHECK: [[INDEX2:%[0-9]+]]:_(p0) = G_INDEX [[INTTOPTR]], [[C1]](s8)
    ; CHECK: [[PTRTOINT:%[0-9]+]]:_(s16) = G_PTRTOINT [[INDEX2]](p0)
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[PTRTOINT]](s16)
    ; CHECK: G_STORE [[UV]](s8), [[COPY]](p0) :: (store 1)
    ; CHECK: [[INDEX3:%[0-9]+]]:_(p0) = G_INDEX [[COPY]], [[C]](s8)
    ; CHECK: G_STORE [[UV1]](s8), [[INDEX3]](p0) :: (store 1 into unknown-address + 1)
    ; CHECK: RTS implicit [[INTTOPTR1]](p0)
    %0:_(p0) = COPY $rs1
    %1:_(p0) = G_VAARG %0, 1
    RTS implicit %1
...
---
name: alloca
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: alloca
    ; CHECK: [[C:%[0-9]+]]:_(s16) = G_CONSTANT i16 2
    ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $rs0
    ; CHECK: [[PTRTOINT:%[0-9]+]]:_(s16) = G_PTRTOINT [[COPY]](p0)
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[PTRTOINT]](s16)
    ; CHECK: [[UV2:%[0-9]+]]:_(s8), [[UV3:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[C]](s16)
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[C2:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[UV]], [[UV2]], [[C2]]
    ; CHECK: [[COPY1:%[0-9]+]]:_(s8) = COPY [[SBC]](s8)
    ; CHECK: [[COPY2:%[0-9]+]]:_(s1) = COPY [[SBC1]](s1)
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[UV1]], [[UV3]], [[COPY2]]
    ; CHECK: [[COPY3:%[0-9]+]]:_(s8) = COPY [[SBC5]](s8)
    ; CHECK: [[MV:%[0-9]+]]:_(s16) = G_MERGE_VALUES [[COPY1]](s8), [[COPY3]](s8)
    ; CHECK: [[INTTOPTR:%[0-9]+]]:_(p0) = G_INTTOPTR [[MV]](s16)
    ; CHECK: [[UV4:%[0-9]+]]:gpr(s8), [[UV5:%[0-9]+]]:gpr(s8) = G_UNMERGE_VALUES [[INTTOPTR]](p0)
    ; CHECK: SetSPHi [[UV5]](s8), implicit-def $rs0, implicit $rs0
    ; CHECK: SetSPLo [[UV4]](s8), implicit-def $rs0, implicit $rs0
    ; CHECK: [[COPY4:%[0-9]+]]:_(p0) = COPY [[INTTOPTR]](p0)
    ; CHECK: RTS implicit [[COPY4]](p0)
    %0:_(s16) = G_CONSTANT i16 2
    %1:_(p0) = G_DYN_STACKALLOC %0:_(s16), 1
    RTS implicit %1
...
---
name: va_copy
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: va_copy
    ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $rs0
    ; CHECK: [[COPY1:%[0-9]+]]:_(p0) = COPY $rs1
    ; CHECK: [[LOAD:%[0-9]+]]:_(s8) = G_LOAD [[COPY]](p0) :: (load 1)
    ; CHECK: [[C:%[0-9]+]]:_(s8) = G_CONSTANT i8 1
    ; CHECK: [[INDEX:%[0-9]+]]:_(p0) = G_INDEX [[COPY]], [[C]](s8)
    ; CHECK: [[LOAD1:%[0-9]+]]:_(s8) = G_LOAD [[INDEX]](p0) :: (load 1 from unknown-address + 1)
    ; CHECK: [[MV:%[0-9]+]]:_(s16) = G_MERGE_VALUES [[LOAD]](s8), [[LOAD1]](s8)
    ; CHECK: [[INTTOPTR:%[0-9]+]]:_(p0) = G_INTTOPTR [[MV]](s16)
    ; CHECK: [[PTRTOINT:%[0-9]+]]:_(s16) = G_PTRTOINT [[INTTOPTR]](p0)
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[PTRTOINT]](s16)
    ; CHECK: G_STORE [[UV]](s8), [[COPY1]](p0) :: (store 1)
    ; CHECK: [[INDEX1:%[0-9]+]]:_(p0) = G_INDEX [[COPY1]], [[C]](s8)
    ; CHECK: G_STORE [[UV1]](s8), [[INDEX1]](p0) :: (store 1 into unknown-address + 1)
    ; CHECK: RTS implicit [[COPY1]](p0)
    %0:_(p0) = COPY $rs0
    %1:_(p0) = COPY $rs1
    G_INTRINSIC_W_SIDE_EFFECTS intrinsic(@llvm.va_copy), %1, %0
    RTS implicit %1
...
---
name: dyn_stackalloc
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: dyn_stackalloc
    ; CHECK: [[COPY:%[0-9]+]]:_(s16) = COPY $rs1
    ; CHECK: [[COPY1:%[0-9]+]]:_(p0) = COPY $rs0
    ; CHECK: [[PTRTOINT:%[0-9]+]]:_(s16) = G_PTRTOINT [[COPY1]](p0)
    ; CHECK: [[UV:%[0-9]+]]:_(s8), [[UV1:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[PTRTOINT]](s16)
    ; CHECK: [[UV2:%[0-9]+]]:_(s8), [[UV3:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[COPY]](s16)
    ; CHECK: [[C:%[0-9]+]]:_(s1) = G_CONSTANT i1 false
    ; CHECK: [[C1:%[0-9]+]]:_(s1) = G_CONSTANT i1 true
    ; CHECK: [[SBC:%[0-9]+]]:_(s8), [[SBC1:%[0-9]+]]:_(s1), [[SBC2:%[0-9]+]]:_, [[SBC3:%[0-9]+]]:_, [[SBC4:%[0-9]+]]:_ = G_SBC [[UV]], [[UV2]], [[C1]]
    ; CHECK: [[COPY2:%[0-9]+]]:_(s8) = COPY [[SBC]](s8)
    ; CHECK: [[COPY3:%[0-9]+]]:_(s1) = COPY [[SBC1]](s1)
    ; CHECK: [[SBC5:%[0-9]+]]:_(s8), [[SBC6:%[0-9]+]]:_(s1), [[SBC7:%[0-9]+]]:_, [[SBC8:%[0-9]+]]:_, [[SBC9:%[0-9]+]]:_ = G_SBC [[UV1]], [[UV3]], [[COPY3]]
    ; CHECK: [[COPY4:%[0-9]+]]:_(s8) = COPY [[SBC5]](s8)
    ; CHECK: [[C2:%[0-9]+]]:_(s16) = G_CONSTANT i16 -8
    ; CHECK: [[UV4:%[0-9]+]]:_(s8), [[UV5:%[0-9]+]]:_(s8) = G_UNMERGE_VALUES [[C2]](s16)
    ; CHECK: [[AND:%[0-9]+]]:_(s8) = G_AND [[COPY2]], [[UV4]]
    ; CHECK: [[AND1:%[0-9]+]]:_(s8) = G_AND [[COPY4]], [[UV5]]
    ; CHECK: [[MV:%[0-9]+]]:_(s16) = G_MERGE_VALUES [[AND]](s8), [[AND1]](s8)
    ; CHECK: [[INTTOPTR:%[0-9]+]]:_(p0) = G_INTTOPTR [[MV]](s16)
    ; CHECK: [[UV6:%[0-9]+]]:gpr(s8), [[UV7:%[0-9]+]]:gpr(s8) = G_UNMERGE_VALUES [[INTTOPTR]](p0)
    ; CHECK: SetSPHi [[UV7]](s8), implicit-def $rs0, implicit $rs0
    ; CHECK: SetSPLo [[UV6]](s8), implicit-def $rs0, implicit $rs0
    ; CHECK: [[COPY5:%[0-9]+]]:_(p0) = COPY [[INTTOPTR]](p0)
    ; CHECK: RTS implicit [[COPY5]](p0)
    %0:_(s16) = COPY $rs1
    %1:_(p0) = G_DYN_STACKALLOC %0, 8
    RTS implicit %1
...
